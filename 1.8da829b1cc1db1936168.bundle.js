(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{284:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(650),App=function(props){var onSuccess=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(token,metadata){return console.log("onSuccess",token,metadata)}),[]),onEvent=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(token,metadata){return console.log("onEvent",token,metadata)}),[]),onExit=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(token,metadata){return console.log("onExit",token,metadata)}),[]),config={clientName:props.clientName||"",env:props.env||"sandbox",product:props.product||["auth"],publicKey:props.publicKey,onSuccess:onSuccess,onEvent:onEvent,onExit:onExit},_usePlaidLink=Object(_src__WEBPACK_IMPORTED_MODULE_1__.b)(config),open=_usePlaidLink.open,ready=_usePlaidLink.ready,error=_usePlaidLink.error;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{type:"button",className:"button",onClick:function onClick(){return open()},disabled:!ready||error},"Open Plaid Link"))};App.__docgenInfo={description:"",methods:[],displayName:"App"},__webpack_exports__.default=App,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/hooks.js"]={name:"App",docgenInfo:App.__docgenInfo,path:"examples/hooks.js"})},646:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var use_script_1=__webpack_require__(647);exports.default=use_script_1.default},647:function(module,exports,__webpack_require__){"use strict";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(15),react_is_mounted_hook_1=__importDefault(__webpack_require__(648));exports.default=function useScript(_a){var src=_a.src,attributes=__rest(_a,["src"]),isMounted=react_is_mounted_hook_1.default(),_b=react_1.useState(!0),loading=_b[0],setLoading=_b[1],_c=react_1.useState(null),error=_c[0],setError=_c[1];return react_1.useEffect((function(){if(isBrowser){if(!document.querySelector('script[src="'+src+'"]')){var scriptEl=document.createElement("script");scriptEl.setAttribute("src",src),Object.keys(attributes).forEach((function(key){void 0===scriptEl[key]?scriptEl.setAttribute(key,attributes[key]):scriptEl[key]=attributes[key]}));var handleLoad=function(){isMounted()&&setLoading(!1)},handleError=function(error){isMounted()&&setError(error)};return scriptEl.addEventListener("load",handleLoad),scriptEl.addEventListener("error",handleError),document.body.appendChild(scriptEl),function(){scriptEl.removeEventListener("load",handleLoad),scriptEl.removeEventListener("error",handleError)}}isMounted()&&setLoading(!1)}}),[src,attributes,isMounted]),[loading,error]};var isBrowser="undefined"!=typeof window&&void 0!==window.document},648:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var use_is_mounted_1=__importDefault(__webpack_require__(649));exports.default=use_is_mounted_1.default},649:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(15);exports.default=function useIsMounted(){var ref=react_1.useRef(!1);return react_1.useEffect((function(){return ref.current=!0,function(){ref.current=!1}}),[]),function(){return ref.current}}},650:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return usePlaidLink})),__webpack_require__.d(__webpack_exports__,"a",(function(){return PlaidLink}));var react=__webpack_require__(15),react_default=__webpack_require__.n(react),lib=__webpack_require__(646),lib_default=__webpack_require__.n(lib);const createPlaid=options=>{const state={plaid:null,iframe:null,open:!1};if("undefined"==typeof window||!window.Plaid)throw new Error("Plaid not loaded");const config=((o,oldKey,newKey)=>{const newObject={};return delete Object.assign(newObject,o,{[newKey]:o[oldKey]})[oldKey],newObject})(options,"publicKey","key");console.log(config),state.plaid=window.Plaid.create(config),state.iframe=document.querySelector('iframe[id^="plaid-link-iframe-"]:last-child');const exit=exitOptions=>{state.open&&state.plaid&&(state.plaid.exit(exitOptions),exitOptions&&exitOptions.force&&(state.open=!1))};return{open:()=>{state.plaid&&(state.open=!0,state.plaid.open())},exit:exit,destroy:()=>{const wasOpen=state.open;exit({force:!0});const cleanup=()=>{state.iframe&&(state.iframe.remove(),state.iframe=null)};wasOpen&&state.iframe?setTimeout(cleanup,1e3):cleanup()}}},noop=()=>{},usePlaidLink=options=>{const[loading,error]=lib_default()({src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"}),[plaid,setPlaid]=Object(react.useState)(null),[iframeLoaded,setIframeLoaded]=Object(react.useState)(!1);return Object(react.useEffect)(()=>{if(loading)return;if(error||!window.Plaid)return void console.error("Error loading Plaid",error);const next=createPlaid({...options,onLoad:()=>{setIframeLoaded(!0),options.onLoad&&options.onLoad()}});return setPlaid(next),next.destroy},[loading,error]),{error:error,ready:!loading||iframeLoaded,exit:plaid?plaid.exit:noop,open:plaid?plaid.open:noop}};var prop_types=__webpack_require__(282),prop_types_default=__webpack_require__.n(prop_types);const PlaidLink=props=>{const{children:children,style:style,className:className,...config}=props,{error:error,open:open}=usePlaidLink({...config});return react_default.a.createElement("button",{disabled:Boolean(error),type:"button",className:className,style:{padding:"6px 4px",outline:"none",background:"#FFFFFF",border:"2px solid #F1F1F1",borderRadius:"4px",...style},onClick:()=>open()},children)};PlaidLink.displayName="PlaidLink",PlaidLink.propTypes={className:prop_types_default.a.string.isRequired,clientName:prop_types_default.a.string.isRequired,env:prop_types_default.a.string.isRequired,key:prop_types_default.a.string.isRequired,product:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,onSuccess:prop_types_default.a.func.isRequired,countryCodes:prop_types_default.a.array,language:prop_types_default.a.string,onEvent:prop_types_default.a.func,onExit:prop_types_default.a.func,onLoad:prop_types_default.a.func,token:prop_types_default.a.string,userEmailAddress:prop_types_default.a.string,userLegalName:prop_types_default.a.string,webhook:prop_types_default.a.string,children:prop_types_default.a.element}}}]);
//# sourceMappingURL=1.8da829b1cc1db1936168.bundle.js.map